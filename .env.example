# Plagiarism Detection API - Environment Configuration
# Copy this file to .env and fill in your values
# DO NOT commit .env to version control!

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
DB_HOST=postgres
DB_PORT=5432
DB_NAME=plagiarism_db
DB_USER=plagiarism_user
# Generate strong password: openssl rand -base64 32
DB_PASS=change_me_in_production_use_strong_password_32_chars_min

# Database connection pool settings
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_POOL_TIMEOUT=30

# =============================================================================
# RABBITMQ CONFIGURATION
# =============================================================================
RMQ_HOST=rabbitmq
RMQ_PORT=5672
RMQ_USER=plagiarism_mq_user
# Generate strong password: openssl rand -base64 32
RMQ_PASS=change_me_in_production_use_strong_password_32_chars_min

# Queue configuration
RMQ_QUEUE_EXCHANGE=plagiarism
RMQ_QUEUE_ROUTING_KEY=plagiarism
RMQ_QUEUE_NAME=plagiarism_queue
RMQ_QUEUE_DEAD_LETTER_EXCHANGE=plagiarism_dlx
RMQ_QUEUE_ROUTING_KEY_DEAD_LETTER=plagiarism.dead
RMQ_QUEUE_DEAD_LETTER_NAME=plagiarism_dead

# =============================================================================
# API CONFIGURATION
# =============================================================================
# Application environment: development, staging, production
ENVIRONMENT=production

# API Settings
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4

# Security
SECRET_KEY=change_me_use_openssl_rand_base64_32
ACCESS_TOKEN_EXPIRE_MINUTES=30

# CORS (comma-separated list of allowed origins)
# In production, list your frontend domains: https://app.yourschool.edu,https://admin.yourschool.edu
CORS_ORIGINS=http://localhost:3000,http://localhost:8080

# =============================================================================
# PLAGIARISM DETECTION SETTINGS
# =============================================================================
# Default similarity threshold (0.0 - 1.0)
DEFAULT_PLAGIARISM_THRESHOLD=0.75

# Supported languages (comma-separated)
SUPPORTED_LANGUAGES=python,java,cpp,c,javascript,typescript,go,rust

# Maximum file size in bytes (default: 1MB)
MAX_FILE_SIZE=1048576

# Maximum files per batch
MAX_FILES_PER_BATCH=100

# =============================================================================
# WORKER CONFIGURATION
# =============================================================================
# Number of concurrent workers (set to number of CPU cores)
WORKER_CONCURRENCY=4

# Worker prefetch count (how many tasks to grab at once)
WORKER_PREFETCH_COUNT=1

# =============================================================================
# LOGGING
# =============================================================================
LOG_LEVEL=INFO
LOG_FORMAT=json

# =============================================================================
# MONITORING (Optional)
# =============================================================================
# Sentry DSN for error tracking (leave empty to disable)
SENTRY_DSN=

# Prometheus metrics endpoint (leave empty to disable)
METRICS_ENDPOINT=

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
# Redis host (container name in Docker)
REDIS_HOST=redis

# Redis port
REDIS_PORT=6379

# Redis database number (0-15)
REDIS_DB=0

# Redis password (leave empty for no authentication in development)
REDIS_PASSWORD=

# Redis SSL/TLS (set to true for production with encrypted connections)
REDIS_USE_SSL=false

# Maximum memory for Redis (e.g., 512mb, 1gb)
# Redis will use LRU eviction when memory is full
REDIS_MAXMEMORY=512mb

# Fingerprint TTL in seconds (default: 7 days = 604800)
# Fingerprints older than this will be automatically deleted
REDIS_FINGERPRINT_TTL=604800
